{% extends 'base.html' %}

{% block encabezado %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/panel_clasico.css') }}">
<script src="{{ url_for('static', filename='scripts/panel_clasico.js') }}"></script>
{% endblock %}

{% block contenido %}
<script>
    var tipo_usuario = ''
</script>
{% if tipo_usuario %}
<script>
    tipo_usuario = '{{tipo_usuario}}'
</script>
{% endif %}
<div>
    <p id="titulo_panel">Panel clasico del {{fecha}}</p>
    <div class="d-flex flex-row ">
        <div class="border mx-1">Despachos atrasados: </div>
        <div class="border mx-1">Boleta <span class="badge badge-pill badge-primary" id="bol_atraso"></span></div>
        <div class="border mx-1">Factura <span class="badge badge-pill badge-primary" id="fact_atraso"></span></div>
        <div class="border mx-1">Guia <span class="badge badge-pill badge-primary" id="guia_atraso">15</span></div>
        <button class="btn bg-none border btn-sm mx-1" id="ver_despachos_atrasados">Revisar</button>
    </div>
</div>

<div class="box_superior">
    <div class="busqueda">
        <input type="date" id="fecha_docs" name="fecha" value="{{fecha}}" onchange="handler(event);">
    </div>
    <button class="btn btn-primary" onclick=ver_simbologia()>Ver simbologia</button>



    <div id="my_div">
    </div>

    <script>
        function ver_simbologia() {
            console.log(bol_historial)

            console.log(fact_historial)
            var x = document.getElementById("simb")
            if (x.style.display === "none") {
                x.style.display = "inline-block";
            } else {
                x.style.display = "none";
            }

        }
            /*setInterval(function(){
nueva_fecha = $("#fecha_docs").val()
$('#my_div').load("/obtener/guia/"+ nueva_fecha);
}, 2000) /* time in milliseconds (ie 2 seconds)*/


    </script>
</div>

<div class="simbologia" id="simb" style="display: none;">
    <div class="row">
        <div class="col col-sm-6">
            <div><button class="boton_v1" id="btn_simbologia" onclick="alert('hola')"></button><span
                    style="display: inline-block;">
                    <p>: Documento retirado.</p>
                </span></div>
            <div><button class="boton_v1" id="btn_simbologia2" onclick="alert('hola')"></button><span
                    style="display: inline-block;">
                    <p>: Documento retirado Parcial.</p>
                </span></div>
            <div><button class="boton_v1" id="btn_simbologia3" onclick="alert('hola')"></button><span
                    style="display: inline-block;">
                    <p>: Documento NO Retirado.</p>
                </span></div>

        </div>
        <div class="col col-sm-6">
            <div><span class='circle_credito'></span>
                <p>: Asociada a una nota de credito</p>
            </div>
            <div><span class='circle_orden'></span>
                <p>: Asociada a orden de trabajo.</p>
            </div>
            <div><span class='circle_guia'></span>
                <p>: Asociada a guia.</p>
            </div>
            <div><span class='circle_brown'></span>
                <p>: Despacho a domicilio.</p>
            </div>
            <div><span class='circle_doc'></span>
                <p>: Guia con vinculo a boleta o factura.</p>
            </div>
        </div>
    </div>
    <!--
            <ul class="list-group">
                <li class="list-group-item"><span class='circle_credito'></span><p>: Asociada a una nota de credito</p></li>
                <li class="list-group-item"><span class='circle_orden'></span><p>: Asociada a orden de trabajo.</p></li>
                <li class="list-group-item"><span class='circle_guia'></span><p>: Asociada a guia.</p></li>
                <li class="list-group-item"><span class='circle_brown'></span><p>: Despacho a domicilio.</p></li>
                <li class="list-group-item"><span class='circle_doc'></span><p>: Guia con  vinculo a boleta o factura.</p></li>
                <li class="list-group-item"><button class="boton_v1" id="btn_simbologia" onclick="alert('hola')"></button><span style="display: inline-block;"><p> : Documento retirado completamente.</p></span></li>
                <li class="list-group-item"><button class="boton_v1" id="btn_simbologia2" onclick="alert('hola')"></button><span style="display: inline-block;"><p> : Documento retirado Parcial (Incompleto).</p></span></li>
            </ul>-->
</div>
<!--<table><thead><tr><th>Descripcion</th><th>Antes</th><th>Despues</th></tr></thead><tbody><tr><td>msd</td><td>100</td><td>200</td></tr></tbody></table>
    -->
<!-- The Modal -->
<div class="modal" id="modal_info">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">

            </div>

            <!-- Modal body -->
            <div class="modal-body" id="info">
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
            </div>

        </div>
    </div>
</div>

<div id="mensaje">
</div>
<!-- CUERPO DEL PANEL CLASICO  -->
<div class="container" id="body_panel">
</div>

<script>
    var respuesta = null

    setInterval(function () {
        nueva_fecha = $("#fecha_docs").val()
        $('#body_panel').load("/obtener/docs/" + nueva_fecha);
    }, 3000) /* time in milliseconds (ie 2 seconds) , TIEMPO PARA ACTUALIZAR EL BODY-PANEL CON LOS DATOS RECIENTES.*/
    function cargar_body(x_fecha) {
        $('#titulo_panel').text("Panel clasico del " + x_fecha)
        $('#body_panel').load("/obtener/docs/" + x_fecha);
    }
    atrasos();

    $("#ver_despachos_atrasados").click(function () {
        console.log("redirigiendo a despacho atrasado.");
        window.location.href = '{{url_for("main_bp.informes")}}';
    });



</script>

{% endblock %}